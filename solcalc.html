<script type="text/javascript">
	RED.nodes.registerType('solcalc',{
		category: 'function',
		color: '#a6bbcf',
		defaults: {
			name: {value: ""}
		},
		inputs: 1,
		outputs: 1,
		icon: "file.svg",
		label: function() {
			return this.name || "solcalc";
		}
	});
</script>

<script type="text/html" data-template-name="solcalc">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
</script>

<script type="text/html" data-help-name="solcalc">
	<p>
    A node that calculates the next upcoming sunrise or sunset for a given
    latitude/longitude and date/time.
  </p>
  <p>
    The input message must be a json containing a property "datetime" with a 
    javascript Date object as it's value,
    a property "latitude" (positive is northern hemisphere)
    and "longitude" (positive is west of Greenwich).
  </p>
  <p>
    The output message is a JSON containing the properties "datetime",
    "latitude" and "longitude" from the input plus "nextevent" and
    "afternextevent" both of which are JSON objects including the fields
    "event" with either "sunrise" or "sunset" as values and "datetime"
    with a javascript Date object as it's value.
  </p>
  <h2>JSON output example:</h2>
  <p>
    <code>{
  "datetime": "2024-12-30T16:05:05.480Z",
  "latitude": 47.5,
  "longitude": -7.5,
  "nextevent": {
     "event": "sunrise",
     "datetime": "2024-12-31T07:17:48.000Z"
   },
   "afternextevent": {
     "event": "sunset",
     "datetime": "2024-12-31T15:48:45.000Z"
   }
}</code>
  </p>
</script>

